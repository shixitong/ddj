(function(n,d,j){if(!n.CONTEXT_PATH){n.CONTEXT_PATH="/haf"}if(!n.HAF){n.HAF={}}var a=CONTEXT_PATH;function f(s){var r=typeof(s)=="object"?Object.prototype.toString.call(s):typeof(s);switch(r){case"[object Array]":return"array";case"[object Object]":return"object";case"[object Date]":return"date";default:return r}}function e(v){var r=[];var u=f(v)=="array";var s=function(w){if(typeof w=="object"&&w!=null){return e(w)}return/^(string)$/.test(typeof w)?'"'+w.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"')+'"':w};switch(f(v)){case"array":u=true;break;case"object":u=false;break;case"date":return s(v.toString());case"function":return"'function'";default:return s(v)}for(var t in v){if(u){r.push(s(v[t]))}else{r.push('"'+t+'":'+s(v[t]))}}return u?("["+r.join(",")+"]"):("{"+r.join(",")+"}")}function h(s){var r="";if(f(s=="object")){j.each(s,function(u,t){if(f(t)=="object"){j.each(t,function(w,v){r+="&"+u+"."+w+"="+encodeURIComponent(v)})}else{if(f(t)=="array"){j.each(t,function(v,w){r+="&"+u+"="+encodeURIComponent(w)})}else{r+="&"+u+"="+encodeURIComponent(t)}}})}return r.replace(/^\&+/,"")}function p(r){var v,A,s,t;if(f(r)=="object"){var x=j.extend({show:true,showFront:false,backdrop:false,frontTxt:""},r);v=x.show,A=x.showFront,s=x.backdrop,t=x.frontTxt}else{var x=[true,false,false,""];var y=0;for(var w=0;w<arguments.length;w++){if(typeof arguments[w]=="boolean"){x[y++]=arguments[w]}else{x[3]=arguments[w]}}v=x[0],A=x[1],s=x[2],t=x[3];if(x[3]){A=true}}var z=j(".haf-body-mask");var u=j(document.body);if(!v){if(z.size()>0){z.hide();u.removeClass("haf-mask-show")}return}u.addClass("haf-mask-show");if(z.size()==0){z=j("<div class='haf-body-mask'><div class='haf-body-mask-front'></div><div class='haf-body-mask-back'></div></div>");u.append(z)}if(A){z.find(".haf-body-mask-front").html("<div class='haf-mask-msg'><div class='haf-mask-msg-inner'>"+t+"</div></div>")}else{z.find(".haf--mask-msg").remove()}if(s){z.unbind("click").click(function(){p(false)})}z.show()}var c=0;j.ajaxSetup({error:function(t,r,s){if(t.status==200&&t.responseText){alert(t.responseText)}else{if(t.status==0){}else{alert("系统错误："+r+" - "+s)}}}});function l(r){var r=j.extend({type:"POST",async:"true",dataType:"json",backdrop:true,beforeSend:function(){if(c==0){p("请稍后...")}c++},complete:function(){c--;if(c==0){p(false)}}},r);if(!r.backdrop&&c==0){c=1}j.ajax(r)}function i(){try{n.open("","_parent","");n.close();if(n){n.location="about:blank"}}catch(r){n.location="about:blank"}}function k(x,s,w){var w=arguments.length>=2?w:d;if(!s||!x){return w}try{var s=s.split(".");var r=x[s[0]];for(var t=1;t<s.length;t++){r=r[s[t]]}if(typeof r=="undefined"){r=w}return r}catch(u){return w}}function g(w,t,s){if(!t||!w){return}if(typeof t=="object"){if(s==true){j.extend(true,w,t)}else{j.extend(w,t)}}else{var t=t.split(".");var u=0;var r=function(v,x){if(u<t.length-1){if(typeof v[t[u]]!="object"){v[t[u]]={}}u++;r(v[t[u-1]],x)}else{v[t[u]]=x}};r(w,s)}}function b(s,u,t){if(f(s)=="array"){var v=[];j.each(s,function(w,r){v.push(k(r,u,""))});if(typeof t=="boolean"&&t==true){return v}else{if(!t){t=","}return v.join(t)}}else{return k(s,u,"")}}function m(s){if(s==""||s==null||typeof s=="undefined"){return true}if(f(s)=="array"&&s.length==0){return true}if(f(s)=="object"){for(var r in s){return false}return true}return false}function q(s,r){if(!r){r=" "}return s.replace(new RegExp("^"+r+"+|"+r+"+$","gi"),"")}function o(s,r){if(!r){r=" "}return s.replace(new RegExp(r+r+"+","gi"),r).replace(new RegExp("^"+r+"+|"+r+"+$","gi"),"")}j.extend(n.HAF,{basePath:function(r){if(arguments.length>0){a=r}else{return a}},stringify:function(r){return e(r)},dataType:function(r){return f(r)},urlSerialize:function(r){return h(r)},closeWindow:function(){i()},showMask:function(r){p(r)},ajax:function(r){l(r)},getValue:function(u,r,t){return k(u,r,t)},setValue:function(t,s,r){g(t,s,r)},getListValue:function(u,r,t){return b(u,r,t)},isEmpty:function(r){return m(r)},trim:function(r,t){return q(r,t)},trimRepeat:function(r,t){return o(r,t)}})})(window,undefined,jQuery);(function(a,d,c){function b(){var k=[true,false,false,""];var l=0;for(var j=0;j<arguments.length;j++){if(typeof arguments[j]=="boolean"){k[l++]=arguments[j]}else{k[3]=arguments[j]}}var h=k[0],m=k[1],f=k[2],e=k[3];if(k[3]){m=true}var n=c(".haf-body-mask");var g=c(document.body);if(!h){if(n.size()>0){n.hide();g.removeClass("haf-mask-show")}return}g.addClass("haf-mask-show");if(n.size()==0){n=c("<div class='haf-body-mask'><div class='haf-body-mask-front'></div><div class='haf-body-mask-back'></div></div>");g.append(n)}if(m){n.find(".haf-body-mask-front").html("<div class='haf-mask-msg'><div class='haf-mask-msg-inner'>"+(e||"")+"</div></div>")}else{n.find(".haf--mask-msg").remove()}if(f){n.unbind("click").click(function(){HAF.showMask(false)})}n.show()}if(!a.HAF){a.HAF={}}c.extend(a.HAF,{showMask:function(){b()}})})(window,undefined,jQuery);